// Filename - index.js

// Importing modules
import PDFDocument from 'pdfkit'
import fs from 'fs'

// Create a document
const doc = new PDFDocument();

// Saving the pdf file in root directory.
doc.pipe(fs.createWriteStream('example.pdf'));

// Adding functionality
doc.fontSize(30).fillColor('blue').text('Custom PDF with NestJS', 100, 100);

// Add some normal text with different font styles and sizes
doc.fontSize(15).fillColor('black').text('This is a PDF generated using pdfkit and NestJS. You can customize this PDF with various features.');

// Add a table (simple rows with text)
doc.moveDown();
doc.fontSize(12).text('Table Example:', { underline: true });
doc.moveDown();
const tableData = [
  ['Name', 'Age', 'City'],
  ['John Doe', '30', 'New York'],
  ['Jane Smith', '25', 'London'],
  ['Samuel Green', '35', 'Sydney'],
];
tableData.forEach((row, index) => {
  doc.text(row.join(' | '), {
    continued: index < tableData.length - 1,
  });
  doc.moveDown();
});

// Add an image to the PDF (Make sure the image exists)
const imagePath = "../cat.jfif";
if (fs.existsSync(imagePath)) {
  doc.image(imagePath, {
    fit: [250, 300],
    align: 'center',
    valign: 'center',
  });
}

// Add a footer
doc.moveDown();
doc.fontSize(10).fillColor('gray').text('Generated by NestJS PDF', { align: 'center' });

// Finalize the PDF and send the data
doc.end();
